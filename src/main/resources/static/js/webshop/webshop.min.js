var ShoppingBasket;!function(t){ShoppingBasket={LOCAL_STORAGE_SHOPPING_BASKET:"shoppingBasket",toast_id:0,shoppingBasket:[],init:function(){null!==Storages.localStorage.get(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET)&&(ShoppingBasket.shoppingBasket=Storages.localStorage.get(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET)),ShoppingBasket.__createShoppingBasketTable(),ShoppingBasket.binds()},binds:function(){t("#emptyShoppingBasket").on("click",ShoppingBasket.__emptyShoppingBasket),t("#orderForm").on("submit",ShoppingBasket.__beforeShoppingBasketSubmit),t(".btn-shopping-basket").on("click",ShoppingBasket.__addProductToShoppingBasket)},__beforeShoppingBasketSubmit:function(){var e=0;t.each(ShoppingBasket.shoppingBasket,function(a,n){t("#products").append(vsprintf('<input type="hidden" name="products[%s]" value="%s">',[n.key,n.amount])),e++})},__emptyShoppingBasket:function(){ShoppingBasket.shoppingBasket=[],Storages.localStorage.set(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET,[]),ShoppingBasket.__createShoppingBasketTable()},__addProductToShoppingBasket:function(e){e.preventDefault();var a=ShoppingBasket.__indexProductContains(t(e.target).data("product-key"),ShoppingBasket.shoppingBasket);if(a>=0){if(!(ShoppingBasket.shoppingBasket[a].amount<t(e.target).data("customer-limit")))return ShoppingBasket.__shakeShoppingBasket(),!1;ShoppingBasket.shoppingBasket[a].amount++}else ShoppingBasket.shoppingBasket.push({key:t(e.target).data("product-key"),title:t(e.target).data("product-title"),cost:t(e.target).data("product-cost"),amount:1});ShoppingBasket.__pulseShoppingBasket(),Storages.localStorage.set(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET,ShoppingBasket.shoppingBasket),ShoppingBasket.__createShoppingBasketTable()},__createShoppingBasketTable:function(){if(0===ShoppingBasket.shoppingBasket.length)ShoppingBasket.__createEmptyShoppingBasketTable();else{var e="",a=0,n=0,o=0;t.each(ShoppingBasket.shoppingBasket,function(t,p){e+=vsprintf("<tr><td>%s</td><td><a href='#' class='decreaseBasketAmount' data-product-key='%s'><i class='fas fa-minus'></i></a><span class='px-4'>%s</span><a href='#' class='increaseBasketAmount' data-product-key='%s'><i class='fas fa-plus'></i></a></td><td>&euro; %s</td></tr>",[p.title,p.key,p.amount,p.key,parseFloat(Math.round(p.amount*p.cost*100)/100).toFixed(2).replace(".",",")]),n+=p.amount,a+=p.amount*p.cost,p.cost>0&&(o=administrationCostsSetting)}),e+=vsprintf("<tr><td>Administration costs</td><td><td>&euro; %s</td></tr>",[parseFloat(Math.round(100*o)/100).toFixed(2).replace(".",",")]),a+=o,t("#shoppingBasketTable").html(e),t("#shoppingBasketCount").html(n),t("#shoppingBasketTotal").html("&euro; "+parseFloat(Math.round(100*a)/100).toFixed(2).replace(".",",")),t(".increaseBasketAmount").on("click",ShoppingBasket.__increaseProductAmount),t(".decreaseBasketAmount").on("click",ShoppingBasket.__decreaseProductAmount)}},__increaseProductAmount:function(e){e.preventDefault();var a=ShoppingBasket.__indexProductContains(t(e.currentTarget).data("productKey"),ShoppingBasket.shoppingBasket);ShoppingBasket.shoppingBasket[a].amount++,Storages.localStorage.set(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET,ShoppingBasket.shoppingBasket),ShoppingBasket.__createShoppingBasketTable()},__decreaseProductAmount:function(e){e.preventDefault();var a=ShoppingBasket.__indexProductContains(t(e.currentTarget).data("productKey"),ShoppingBasket.shoppingBasket);ShoppingBasket.shoppingBasket[a].amount>1?ShoppingBasket.shoppingBasket[a].amount--:ShoppingBasket.shoppingBasket.splice(a,1),Storages.localStorage.set(ShoppingBasket.LOCAL_STORAGE_SHOPPING_BASKET,ShoppingBasket.shoppingBasket),ShoppingBasket.__createShoppingBasketTable()},__createEmptyShoppingBasketTable:function(){t("#shoppingBasketCount").html(0),t("#shoppingBasketTable").html("<tr><td colspan='3'>Shopping basket is empty!</td></tr>"),t("#shoppingBasketTotal").html("")},__indexProductContains:function(t,e){for(var a=0;a<e.length;a++)if(e[a].key===t)return a;return -1},__pulseShoppingBasket:function(){t("#shoppingBasketButton").addClass("animated pulse").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass("animated pulse")}),ShoppingBasket.__toast("Product added to your shopping basket.")},__shakeShoppingBasket:function(){t("#shoppingBasketButton").addClass("animated shake").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass("animated shake")}),ShoppingBasket.__toast("You reached the maximum sold per customer.")},__toast:function(t){var e=document.createElement("div");e.className="toast show",e.innerHTML=t,document.body.appendChild(e),setTimeout(function(){e.className=e.className.replace("show","")},3e3)}}}(jQuery),$(document).ready(function(){$('[data-markdown="enable"]').each(function(){$(this).html(window.markdownit().renderInline($(this).text()))})});