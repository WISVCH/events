var TemplateSelector;(function(a){TemplateSelector={init:function(){TemplateSelector.binds()},binds:function(){a(".product-template-item a").on("click",TemplateSelector.__setProductTemplateValues)},__setProductTemplateValues:function(c){c.preventDefault();var b=a(c.target).parent().data("template");a.each(b,function(e,f){if(e==="chOnly"){e=e+"1"}var d=a("#"+e);d.val(f);if(e==="chOnly1"&&f===true){d.attr("checked","checked")}else{d.removeAttr("checked")}})}}})(jQuery);$(document).ready(function(){TemplateSelector.init();var b={enableTime:true,altInput:true,altFormat:"F j, Y H:i",dateFormat:"Y-m-dTH:i:S",time_24hr:true};$("#sellStart").flatpickr(b);$("#sellEnd").flatpickr(b);$("#q").autocomplete({serviceUrl:"/api/v1/products/search/unused",onSelect:function(d){a(d.data,d.value);$(this).val("");$("#addProduct").modal("hide")}});$(".remove-product").on("click",function(k){k.preventDefault();var j=$("#products");var h=j.children().length;var f=$(this).data("product-id");var d=j.find(":input[value='"+f+"']");var m=d.attr("id").replace("products","");d.remove();$(this).parent().parent().remove();for(var g=m;g<h;g++){var l=j.find("#products"+g);l.attr("id","products"+(g-1));l.attr("name","products["+(g-1)+"]")}});function a(e,h){const d='<input type="hidden" id="products{0}" name="products[{1}]" value="{2}">';const f="<tr><td><span class='fa fa-exclamation-triangle' data-toggle='tooltip' data-placement='right' title='Do not forget to update the event!'></span> {0}</td><td style='width: 40px;'><a class='btn btn-xs btn-danger remove-product text-white' data-product-id='{1}'><i class='fa fa-remove'></i></a></td></tr>";var i=$("#products");var g=i.children().length;$("#productsTable").append(format(f,[h,e]));i.append(format(d,[g,g,e]));$("#noProducts").remove();c()}function c(){$(function(){$('[data-toggle="tooltip"]').tooltip()})}});function format(a,b){$.each(b,function(c,d){a=a.replace(new RegExp("\\{"+c+"\\}","g"),d)});return a};
